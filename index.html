<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>init — iamshift.dev</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@300;400;600&family=Oxanium:wght@200..800&family=Overpass+Mono:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="snap-container">
    <!-- ======================================================= -->
    <!-- PHASE 1 - BOOT SEQUENCE                                 -->
    <!-- ======================================================= -->
    <section id="init" class="snap-section section-init">
      <div id="bootWrapper" class="boot-screen">
        <div id="bootText">
          <p class="mono boot-header-line">
            <img src="assets/logo-orange.png" class="boot-header-logo" alt="shift logo">
            let shift : moin
          </p>

          <!-- (YOUR FULL BOOT SEQUENCE, UNALTERED) -->
          <p class="mono">shiftOS 4.1 — moinKernel build M41U530.65</p>
          <p class="mono">Copyright (c) 2025 Moinuddin Ahmad. All rights reserved.</p>
          <br>
          <p class="mono">[ INIT ] Booting AppleSilicon-class environment...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  shiftKernel initializing...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Core architecture: MV + services</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Logic layer integrity: verified</p>
          <br>
          <p class="mono">[ INIT ] Loading frameworks...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Swift frameworks loaded: Swift_6.0, SwiftUI_6.0, SwiftData</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Design interfaces active: Figma_2025.04, AdobeSuite_CC, Apple_HIG</p>
          <br>
          <p class="mono">[ INIT ] Registering applications...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  App registered: Guess_Animals! — 28K_views, 1K_active_users</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  App registered: ToDo — recurrence_engine.v2.0 + SwiftData_persistence</p>
          <br>
          <p class="mono">[ INIT ] Starting philosophical components...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  clarity.kernel online</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  adaptability.service running</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  intent.daemon initialized</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  craft.scheduler active</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  empathy.protocol established</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  focus.thread stable</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  persistence.monitor healthy</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  curiosity.agent registered</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  perfectionism.filter adjusted → safe_mode</p>
          <br>
          <p class="mono">[ INIT ] Checking hardware layer...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Device detected: MacBookPro16_M3Max</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Device detected: iPhone15ProMax</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Device detected: WatchUltra2</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Device detected: iPadPro12.9_5thG_WiFiOnly</p>
          <br>
          <p class="mono">[ INIT ] Network stack initialization...</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Ethernet_adapter: active</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  WiFi_chipset: verified</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  DNS_resolver: online</p>
          <p class="mono"><span class="status-ok">[ OK ]</span>  Domain linked: iamshift.dev</p>
          <br>
          <p class="mono">[ VERIFY ] shiftKernel integrity check: passed</p>
          <p class="mono">[ LOG ]  System philosophy: shift is standard // design is craft</p>
          <br>
          <p class="mono">System uptime: 0s</p>
          <br>
          <p class="mono">
            >> Initializing graphical output, user interface, and interactive systems
            <span class="loading-ellipsis"></span>
          </p>
          <br>
          <p class="mono">Welcome, User.</p>
          <p class="mono">> system ready — init(shift: MoinuddinAhmad)</p>

        </div>

        <!-- ======================================================= -->
        <!-- PHASE 2 — BOOT SPLASH                                   -->
        <!-- ======================================================= -->
        <div id="brandSplash" class="boot-splash">
          <div class="boot-splash-inner">
            <img src="assets/logo-orange.png" alt="shift logo" class="boot-logo">
            <div class="boot-title">

              <span class="bt-word bt-moin">moin</span>
              <span class="bt-word bt-colon">:</span>
              <span class="bt-word bt-shift">shift</span>
              <span class="bt-word bt-let">let</span>

            </div>
            <div class="boot-progress-bar">
              <div class="boot-progress-fill"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ======================================================= -->
      <!-- PHASE 3 — INIT SECTION                                  -->
      <!-- ======================================================= -->
      <div class="init-center">
        <div class="init-content">

          <h1 class="mono headline">init</h1>
          <p class="mono init-tagline">where intent originates</p>

          <div class="intro-container">

            <p class="intro-line intro-shift">
              I am <span class="shift">shift</span> — the standard and discipline through which intent becomes action.<br>
              <span class="indent">Precision is my method, and constancy is the measure behind every decision.</span>
            </p>

            <p class="intro-line intro-moin">
              I am <span class="moin">Moin</span> — the origin of my intent and the source of the humanity in my work.<br>
              <span class="indent">Guidance, principle, and purpose shape how I align myself in everything I build.</span>
            </p>

            <p class="mono axiom">
              shift is standard <span class="slashes slash-anim">//</span> design is craft
            </p>

          </div>

        </div>
      </div>

    </section>

    <!-- ======================================================= -->
    <!-- CODE SECTION                                             -->
    <!-- ======================================================= -->
    <section id="code" class="snap-section section-code anim-section">
      <div class="code-container">
        <h1 class="mono headline-code">code</h1>
        <p class="mono code-tagline">where structure meets intention</p>

        <div class="code-block">

          <div class="code-line mono">
            <div class="code-header">
              <span class="expand-arrow">›</span>
              <span class="code-main">Swift • SwiftUI • SwiftData</span>
            </div>
            <span class="code-detail">
              My ecosystem of creation — tools for translating clarity into interactive systems.
              Every function, view, and model exists to refine the relationship between logic and expression.
            </span>
          </div>

          <div class="code-line mono">
            <div class="code-header">
              <span class="expand-arrow">›</span>
              <span class="code-main">Clarity is the foundation of every system I build.</span>
            </div>
            <span class="code-detail">
              Clarity precedes architecture — it’s the discipline that turns ideas into consistent behavior.
              It keeps both the code and the interface aligned with purpose, never excess.
            </span>
          </div>

          <div class="code-line mono">
            <div class="code-header">
              <span class="expand-arrow">›</span>
              <span class="code-main">Simplicity scales. Complexity demands care.</span>
            </div>
            <span class="code-detail">
              Simplicity enables adaptation; complexity, when required, deserves deliberate structure.
              Both are balanced through intent — clarity keeps the system humane and maintainable.
            </span>
          </div>

          <div class="code-line mono">
            <div class="code-header">
              <span class="expand-arrow">›</span>
              <span class="code-main">Clean code is calm code.</span>
            </div>
            <span class="code-detail">
              Calmness in logic mirrors calmness in experience.
              Readable, modular structures guide creativity instead of constraining it, keeping the design flexible and precise.
            </span>
          </div>

          <div class="code-line mono">
            <div class="code-header">
              <span class="expand-arrow">›</span>
              <span class="code-main">Code defines rhythm — clarity is performance.</span>
            </div>
            <span class="code-detail">
              From clarity comes rhythm, and from rhythm comes performance.
              It’s how creativity emerges from structure — every interaction becomes both logical and expressive.
            </span>
          </div>
        </div>

        <p class="mono creative-principle" id="creativePrinciple">
          clarity → intent → creativity <span class="dot">•</span>
        </p>

        <p class="code-prompt mono">
          <span class="code-cursor"></span>
          <span class="cursor-placeholder">start building</span>
        </p>
      </div>
    </section>

    <!-- ======================================================= -->
    <!-- PIXEL SECTION                                           -->
    <!-- ======================================================= -->
    <section id="pixel" class="snap-section section-pixel anim-section">
      <div class="pixel-bg"></div>

      <div class="pixel-container">
        <h1 class="mono headline-pixel">pixel</h1>

        <p class="mono pixel-tagline">
          where clarity becomes visible
        </p>

        <p class="pixel-intent">
          Design is how I give structure character — form guided by clarity, expression shaped by intent.
        </p>

        <div class="code-block pixel-block">

          <!-- 1. Interface systems -->
          <div class="code-line pixel-line mono">
            <div class="code-header pixel-header">
              <span class="expand-arrow">›</span>
              <span class="code-main pixel-main">
                Interface systems — grids • rhythm • flow
              </span>
            </div>
            <span class="code-detail pixel-detail">
              I design interfaces with spatial logic: grids that create order, rhythm that guides flow, and constraints that produce clarity.
              Every surface should orient the user without shouting — guidance through alignment, hierarchy, and pacing.
            </span>
          </div>

          <!-- 2. Interaction & motion -->
          <div class="code-line pixel-line mono">
            <div class="code-header pixel-header">
              <span class="expand-arrow">›</span>
              <span class="code-main pixel-main">
                Interaction &amp; motion — feedback that feels inevitable
              </span>
            </div>
            <span class="code-detail pixel-detail">
              I use motion to reinforce meaning: easing as communication, timing as emphasis, and transitions that feel like the only reasonable outcome.
              Movement exists only to support clarity — never spectacle.
            </span>
          </div>

          <!-- 3. Visual language -->
          <div class="code-line pixel-line mono">
            <div class="code-header pixel-header">
              <span class="expand-arrow">›</span>
              <span class="code-main pixel-main">
                Visual language — typography • tone • identity
              </span>
            </div>
            <span class="code-detail pixel-detail">
              Visual systems begin with type: scale, contrast, and pacing that define how a product speaks before it communicates.
              I design visual languages that express identity without ornament — grounded in restraint, guided by clarity, shaped by intent.
            </span>
          </div>

        </div>

        <!-- SOCIAL LINKS ROW -->
        <div class="pixel-social-links mono">
          <a href="https://dribbble.com/iamshift" class="pixel-social-link dribbble" target="_blank" rel="noopener noreferrer">dribbble</a>
          <span class="dot">•</span>

          <a href="https://www.behance.net/iamshift" class="pixel-social-link behance" target="_blank" rel="noopener noreferrer">behance</a>
          <span class="dot">•</span>

          <a href="https://500px.com/iamshift" class="pixel-social-link px500" target="_blank" rel="noopener noreferrer">500px</a>
          <span class="dot">•</span>

          <a href="https://www.instagram.com/iamshift.dev" class="pixel-social-link instagram" target="_blank" rel="noopener noreferrer">instagram</a>
        </div>
      </div>

      <div class="pixel-spark-viewport"></div>
    </section>

    <!-- ======================================================= -->
    <!-- ECHO SECTION                                            -->
    <!-- ======================================================= -->
    <section id="echo" class="snap-section section-echo anim-section">

      <div class="echo-container">

        <h1 class="mono headline-echo">echo</h1>

        <p class="mono echo-tagline">
          where intention becomes narrative
        </p>

        <p class="echo-intent">
          I write to clarify what I build — to articulate the decisions, patterns, and principles that shape my work.
          Every reflection is an attempt to make the implicit explicit, to understand how craft becomes form and how intent becomes experience.
        </p>

        <div class="code-block echo-block">

          <div class="code-line echo-line mono">
            <div class="code-header echo-header">
              <span class="expand-arrow">›</span>
              <span class="code-main echo-main">
                Product clarity — decisions shape experience
              </span>
            </div>
            <span class="code-detail echo-detail">
              Every choice in a product communicates something — priority, intent, rhythm, friction, possibility.
              Writing about product clarity is a way to study why decisions guide the user — or distract them.
              It’s where structure meets empathy.
            </span>
          </div>

          <div class="code-line echo-line mono">
            <div class="code-header echo-header">
              <span class="expand-arrow">›</span>
              <span class="code-main echo-main">
                Design &amp; language — communication through pattern
              </span>
            </div>
            <span class="code-detail echo-detail">
              Design is a language long before it is an interface.
              Typography, spacing, tone, and hierarchy all speak with or without permission.
              I write about how language shapes design — and how clarity shapes both.
            </span>
          </div>

          <div class="code-line echo-line mono">
            <div class="code-header echo-header">
              <span class="expand-arrow">›</span>
              <span class="code-main echo-main">
                Engineering reflections — precision as practice
              </span>
            </div>
            <span class="code-detail echo-detail">
              Engineering is intention expressed through constraints.
              Writing helps me examine the patterns that hold systems together — from architecture to data flow
              to the small details that create reliability.
              Precision is not a luxury; it’s the foundation.
            </span>
          </div>

          <div class="code-line echo-line mono">
            <div class="code-header echo-header">
              <span class="expand-arrow">›</span>
              <span class="code-main echo-main">
                Craft &amp; discipline — the work behind the work
              </span>
            </div>
            <span class="code-detail echo-detail">
              Craft is built through repetition, restraint, clarity, and care.
              I write about the habits and disciplines that keep me grounded — the principles behind the work,
              not just the work itself.
            </span>
          </div>

        </div>

        <div class="echo-social-links mono">
          <a href="https://iamshift.substack.com" target="_blank" class="echo-social-link substack">substack</a>
          <span class="dot">•</span>
          <a href="https://mastodon.social/@iamshift" target="_blank" class="echo-social-link mastodon">mastodon</a>
          <span class="dot">•</span>
          <a href="https://bsky.app/profile/iamshift.dev" target="_blank" class="echo-social-link bluesky">bluesky</a>
        </div>

      </div>

    </section>

    <!-- ======================================================= -->
    <!-- SELF SECTION                                            -->
    <!-- ======================================================= -->
    <section id="self" class="snap-section section-self">
      <div class="self-container">

        <div class="self-header">
          <h1 class="headline-self mono">self</h1>
          <p class="self-tagline mono">identity • principle • <em>the man behind the curtain</em></p>
        </div>

        <div class="self-content">

          <!-- Profile Image -->
          <div class="self-photo">
            <img src="assets/moin.png" alt="Moinuddin Ahmad portrait">
          </div>

          <!-- Main Text Column -->
          <div class="self-text">

            <p class="self-intro">
              My work begins with intent — shaped by principle, refined through discipline.  
              Clarity guides how I design, precision defines how I build.
            </p>

            <p class="self-block-title mono">about <strong>moin</strong></p>
            <p class="self-body">
              I’m Moinuddin Ahmad, a designer+developer creating thoughtful, intentional experiences across the Apple ecosystem.
              My background blends engineering and design, allowing me to build systems and interfaces with equal fluency.
              I value clarity, purpose, and the pursuit of mastery.
            </p>

            <p class="self-block-title mono">about <strong>shift</strong></p>
            <p class="self-body">
              shift is the constant, the standard and discipline through which intent becomes action.
              It underlines every decision I make, and it shapes the way I approach design, engineering, and craft.
            </p>

            <p class="self-block-title mono">process</p>
            <p class="self-body">
              I think through structure, design through reduction, and build through iteration.
              My process is grounded in clarity, guided by intent, and measured through precision.
            </p>

            <p class="self-block-title mono">technical background</p>
            <p class="self-body">
              I build using Swift, SwiftUI, and modern Apple frameworks, for Apple's platforms.
              My experience spans system architecture, interface design, animations, accessibility, persistence, performance tuning, and full-cycle product development from concept to release.
            </p>

            <p class="self-contact mono">
              Got an idea? Need someone to build it?<br>
              Let's connect, below.
            </p>

          </div><!-- /self-text -->
        </div><!-- /self-content -->
      </div><!-- /self-container -->
    </section>

    <!-- ======================================================= -->
    <!-- PING SECTION                                            -->
    <!-- ======================================================= -->
    <section id="ping" class="snap-section section-ping">
      <div class="ping-container">

        <h1 class="headline-ping mono">ping</h1>
        <p class="ping-tagline mono">
          latency: 2ms <span class="dot">•</span> status: <span class="status-ok">online</span>
        </p>

        <div class="ping-content">

          <p class="ping-intent">
            A signal sent, a response returned. Communication is the synchronization of intent.
            <br>
            Whether for collaboration, inquiry, or simple signal verification — I am listening.
          </p>

          <!-- Connection Grid -->
          <div class="ping-grid">

            <!-- 1. Availability (New) -->
            <div class="ping-item">
              <div class="ping-label mono">system status</div>
              <div class="ping-stat mono">
                <span class="status-ok">Available</span>
              </div>
              <span class="ping-sub">Open for new collaborations</span>
            </div>

            <!-- 2. Direct Line -->
            <div class="ping-item">
              <div class="ping-label mono">transmission protocol</div>
              <a href="mailto:init@iamshift.dev" class="ping-link mono">
                init@iamshift.dev <span class="arrow">→</span>
              </a>
              <span class="ping-sub">For project inquiries &amp; architecture</span>
            </div>

            <!-- 3. Location / Time -->
            <div class="ping-item">
              <div class="ping-label mono">origin point</div>
              <div class="ping-stat mono">
                New York, NY <span class="dim">(USA)</span>
              </div>
              <span class="ping-sub">
                <span class="ping-key">Timezone:</span> US Central Time (UTC-06:00)
              </span>
            </div>

          </div>

          <!-- Social Array (Moved from Self) -->
          <div class="ping-social-array mono">
           <a href="https://bsky.app/profile/iamshift.dev" target="_blank" class="ping-social bluesky">bluesky</a>
           <span class="dot">•</span>
           <a href="https://mastodon.social/@iamshift" target="_blank" class="ping-social mastodon">mastodon</a>
           <span class="dot">•</span>
           <a href="https://iamshift.substack.com" target="_blank" class="ping-social substack">substack</a>
           <span class="dot">•</span>
           <a href="https://www.instagram.com/iamshift.dev" target="_blank" class="ping-social instagram">instagram</a>
         </div>

         <div class="ping-rings">
          <div class="ping-ring"></div>
          <div class="ping-ring"></div>
          <div class="ping-ring"></div>
          <div class="ping-ring"></div>
        </div>
      </div>
    </div>
  </section>
 </main>

<!-- ======================================================= -->
<!-- SIDE NAVIGATION                                          -->
<!-- ======================================================= -->

<!-- 2. GLOBAL LOGO (Badge Container) -->
<div class="global-logo-container">
  <img src="assets/logo-orange.png" class="global-logo-img spin-target" alt="shift logo">
</div>

<div class="site-title-wrap">
  <div class="site-title">
    <span class="g-word-let">let</span>
    <span class="g-word-shift">shift</span>
    <span class="g-word-colon">:</span>
    <span class="g-word-moin">moin</span>
  </div>
</div>

<nav id="sideNav" class="side-nav">
  <ul>
    <li data-section="init" class="active" data-tooltip="init"></li>
    <li data-section="code" data-tooltip="code"></li>
    <li data-section="pixel" data-tooltip="pixel"></li>
    <li data-section="echo" data-tooltip="echo"></li>
    <li data-section="self" data-tooltip="self"></li>
    <li data-section="ping" data-tooltip="ping"></li>
  </ul>
</nav>

<div class="scroll-cue mono">scroll ↓</div>

<!-- ======================================================= -->
<!-- JAVASCRIPT                                               -->
<!-- ======================================================= -->
<script>
  // --------------------------------------------------------
  // ELEMENT REFERENCES
  // --------------------------------------------------------
  const snapContainer = document.querySelector(".snap-container");
  const bootWrapper   = document.getElementById("bootWrapper");
  const bootText      = document.getElementById("bootText");
  const siteTitle     = document.querySelector(".site-title");
  const brandSplash   = document.getElementById("brandSplash");
  const landing       = document.getElementById("landing");
  const scrollCue     = document.querySelector(".scroll-cue");
  const sideNav       = document.getElementById("sideNav");
  const globalLogoContainer = document.querySelector(".global-logo-container");

  // Sections + nav dots for later
  const sections   = document.querySelectorAll(".snap-section");
  const navItems   = document.querySelectorAll(".side-nav li");
  const sectionIds = Array.from(sections).map(sec => sec.id);

  let bootFinished = false;

  // if (siteTitle) {
  //   siteTitle.style.opacity = "0";
  //   siteTitle.style.transform = "translateY(-50%) translateX(-42px)";
  // }

  // Lock scroll during boot
  if (snapContainer) snapContainer.classList.add("boot-lock");
  if (bootWrapper)   bootWrapper.scrollTop = 0;

  // --------------------------------------------------------
  // BOOT SEQUENCE — LINE BY LINE
  // --------------------------------------------------------
  const bootLines = bootText.querySelectorAll("p, br");
  let delay = 200;
  let total = 0;

  bootLines.forEach((line) => {
    setTimeout(() => {
      line.classList.add("visible");

      const needsScroll =
      bootWrapper.scrollHeight > bootWrapper.clientHeight + 5;

      if (needsScroll) {
        bootWrapper.scrollTop = bootWrapper.scrollHeight;
      }
    }, total);

    const txt = line.innerText.trim();
    total += delay;

    if (txt.startsWith("Copyright"))   total += 900;
    if (txt.startsWith("[ INIT ]"))    total += 300; //1000
    if (txt.startsWith("[ OK ]"))      total += 80;
    if (txt.startsWith("[ VERIFY ]"))  total += 250; //650
  });

  // --------------------------------------------------------
  // PHASES TIMING
  // --------------------------------------------------------
  const powerDownTime = total + 2000;
  // Phase 2: brand splash pause duration (existing pause + 0.8s)
  const showInitDelay = 2200;
  const splashDuration = showInitDelay + 1800;

  // Phase 2 — show centered logo + title on black
  const bootTopLeftLogo = document.querySelector('.boot-topleft-logo');
  if (bootTopLeftLogo) {
    bootTopLeftLogo.style.display = "block";
  }

  function startBrandSplash() {
    if (bootText) {
      bootText.style.display = "none";
    }
    if (brandSplash) {
      brandSplash.classList.add("show");
    }

    // Animate ALL boot words, not just the first
    const words = document.querySelectorAll(".bt-word");

    words.forEach((word) => {
      word.classList.remove("animate");   // reset
      void word.offsetWidth;              // force reflow
      word.classList.add("animate");      // restart staggered animation
    });

    // Start progress bar fill
    const progressFill = document.querySelector(".boot-progress-fill");
    if (progressFill) {
      progressFill.style.width = "100%";

      // Flash to white right when bar completes
      setTimeout(() => {
        progressFill.classList.add("completed");
      }, 3300); // matches the 3s fill transition
    }

    document.querySelector('.boot-topleft-logo').style.display = 'none';
  }

  // Phase 3 — boot overlay "turns off" (no fade) and init appears
  function finishBoot() {
    if (bootFinished) return;

    bootWrapper.style.display = "none";
    if (brandSplash) brandSplash.style.display = "none";

    // FORCE REFLOW BEFORE SHOWING GLOBAL LOGO
    void globalLogoContainer.offsetWidth;
    globalLogoContainer.classList.add("show");

    // Trigger global title animation only after logo is visible
    setTimeout(() => {
      const letWord   = document.querySelector('.g-word-let');
      const shiftWord = document.querySelector('.g-word-shift');
      const colonWord = document.querySelector('.g-word-colon');
      const moinWord  = document.querySelector('.g-word-moin');

      if (letWord)   letWord.style.animation   = "gLetFadeLift 0.45s ease-out forwards";
      if (shiftWord) shiftWord.style.animation = "gFadeLeft 0.45s ease-out forwards 0.25s";
      if (colonWord) colonWord.style.animation = "gFadeLeft 0.45s ease-out forwards 0.50s";
      if (moinWord)  moinWord.style.animation  = "gFadeLeft 0.45s ease-out forwards 0.75s";
    }, 100); // run after layout stabilizes

    document.getElementById("init").classList.add("show");
    // landing.classList.add("show");

    const initSection = document.getElementById("init");
    if (initSection) {
      initSection.classList.add("show");
    }

    scrollCue.classList.add("show");
    sideNav.classList.add("show");

    snapContainer.classList.remove("boot-lock");
    bootFinished = true;

    startObservers();
  }

    // Timed transitions — Phase 1 → 2 → 3
  const splashTimeout = setTimeout(() => {
    startBrandSplash();
  }, powerDownTime);

  // Listen for completion of the FINAL boot splash word ("let")
  const lastWord = document.querySelector(".bt-let");

  if (lastWord) {
    lastWord.addEventListener("animationend", () => {
    // Add a little extra viewing time for the user
      setTimeout(() => {
        finishBoot();
    }, 3300); // <-- Adjust reading buffer here
    }, { once: true });
  }

  // --------------------------------------------------------
    // SPACE BAR → SKIP BOOT
  // --------------------------------------------------------
  window.addEventListener("keydown", (e) => {
    if (!bootFinished && (e.code === "Space" || e.key === " ")) {
      e.preventDefault();

      // Cancel Phase 1 auto-timers
      if (typeof splashTimeout !== "undefined") clearTimeout(splashTimeout)

      // Skip only the boot text; still show Phase 2 splash
        startBrandSplash();

      // After a full splash duration, proceed to Phase 3
      // setTimeout(() => {
      //   finishBoot();
      // }, splashDuration);

      const words = document.querySelectorAll(".bt-word");
      words.forEach(word => {
        word.classList.remove("animate");
        void word.offsetWidth; // force reflow
        word.classList.add("animate");
      });
    }
  });

  // --------------------------------------------------------
  // NAV + KEYBOARD HELPERS (unchanged)
  // --------------------------------------------------------

  // --------------------------------------------------------
  // KEYBOARD NAVIGATION (AFTER BOOT)
  //   j / ArrowDown      → next section
  //   k / ArrowUp        → previous section
  //   Space              → next section
  //   Shift + Space      → previous section
  // --------------------------------------------------------

  function scrollToSectionId(id) {
    const target = document.getElementById(id);
    if (!target) return;
    target.scrollIntoView({
      behavior: "smooth",
      block: "start"
    });
  }

  function getCurrentSectionIndex() {
    const activeDot = document.querySelector(".side-nav li.active");
    if (!activeDot) return 0;
    const activeId = activeDot.getAttribute("data-section");
    const idx = sectionIds.indexOf(activeId);
    return idx === -1 ? 0 : idx;
  }

  window.addEventListener("keydown", (e) => {
    if (!bootFinished) return;

    const isSpace = (e.code === "Space" || e.key === " ");
    const isNext =
    e.code === "ArrowDown" ||
    e.key === "j" ||
    (isSpace && !e.shiftKey);

    const isPrev =
    e.code === "ArrowUp" ||
    e.key === "k" ||
    (isSpace && e.shiftKey);

    if (isNext) {
      e.preventDefault();
      const current = getCurrentSectionIndex();
      const next = Math.min(sectionIds.length - 1, current + 1);
      scrollToSectionId(sectionIds[next]);
    } else if (isPrev) {
      e.preventDefault();
      const current = getCurrentSectionIndex();
      const prev = Math.max(0, current - 1);
      scrollToSectionId(sectionIds[prev]);
    }
  });

  // --------------------------------------------------------
  // NAV DOT CLICK → SCROLL (unchanged)
  // --------------------------------------------------------
  navItems.forEach((dot) => {
    dot.addEventListener("click", () => {
      if (!bootFinished) return;

      const id = dot.getAttribute("data-section");
      scrollToSectionId(id);

      navItems.forEach((li) => li.classList.remove("active"));
      dot.classList.add("active");
    });
  });

  // --------------------------------------------------------
  // INTERSECTION OBSERVER → SECTION REVEAL + ACTIVE DOT (unchanged)
  // --------------------------------------------------------
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        const id = entry.target.getAttribute("id");
        const navItem = document.querySelector(`.side-nav li[data-section="${id}"]`);

        if (entry.isIntersecting) {
          // Don't mark INIT as "shown" while the boot sequence is still active
          if (entry.target.id === "init" && !bootFinished) {
            return;
          }

          entry.target.classList.add("show");
          navItems.forEach((li) => li.classList.remove("active"));
          if (navItem) navItem.classList.add("active");
        }

        const sectionId = entry.target.id;

        document.body.classList.remove(
          "theme-init", "theme-code", "theme-pixel",
          "theme-echo", "theme-self", "theme-ping"
          );
        document.body.classList.add(`theme-${sectionId}`);
      });
    },
    { threshold: 0.33 }
    );

  function startObservers() {
    sections.forEach((section) => observer.observe(section));
  }

  // --------------------------------------------------------
  // GLOBAL LOGO — spin on scroll direction
  // --------------------------------------------------------
  (function () {
    const spinTarget   = document.querySelector('.spin-target');
    const snapContainer = document.querySelector('.snap-container');
    if (!spinTarget || !snapContainer) return;

    // After the boot "spinReverb" finishes, clear its animation property
    spinTarget.addEventListener('animationend', (e) => {
      if (e.animationName === 'spinReverb') {
        // allow later animations (scroll spins) to take over cleanly
        spinTarget.style.animation = '';
      }
    });

    let lastScrollTop = snapContainer.scrollTop;

    snapContainer.addEventListener('scroll', () => {
      const current = snapContainer.scrollTop;
      const delta   = current - lastScrollTop;

      if (delta === 0) return; // no movement = no spin
      const direction = delta > 0 ? 'down' : 'up';
      lastScrollTop = current;

      // remove any existing spin so we can retrigger
      spinTarget.classList.remove('spin-scroll-cw', 'spin-scroll-ccw');
      // force reflow so the new animation restarts
      void spinTarget.offsetWidth;

      if (direction === 'down') {
        spinTarget.classList.add('spin-scroll-cw');   // clockwise
      } else {
        spinTarget.classList.add('spin-scroll-ccw');  // counter-clockwise
      }
    });
  })();

  // --------------------------------------------------------
  // CODE BLOCK EXPAND/COLLAPSE - ACCORDION (unchanged)
  // --------------------------------------------------------
  document.querySelectorAll(".code-line").forEach((line) => {
    line.addEventListener("click", () => {

      // 1. If this line is already expanded → collapse it
      const isOpen = line.classList.contains("expanded");

      if (isOpen) {
        line.classList.remove("expanded");
        const arrow = line.querySelector(".expand-arrow");
        if (arrow) arrow.style.transform = "rotate(0deg)";
        return;
      }

      // 2. Close ALL other expanded lines
      document.querySelectorAll(".code-line.expanded").forEach((other) => {
        other.classList.remove("expanded");
        const otherArrow = other.querySelector(".expand-arrow");
        if (otherArrow) otherArrow.style.transform = "rotate(0deg)";
      });

      // 3. Open THIS line
      line.classList.add("expanded");
      const arrow = line.querySelector(".expand-arrow");
      if (arrow) arrow.style.transform = "rotate(90deg)";
    });
  });

  document.addEventListener("DOMContentLoaded", () => {
    const selfSection = document.querySelector("#self");
    const siteTitle   = document.querySelector(".site-title");

  // If either is missing, bail out quietly (no runtime error)
    if (!selfSection || !siteTitle) return;

    const titleObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          siteTitle.classList.add("dark");
        } else {
          siteTitle.classList.remove("dark");
        }
      });
    }, { threshold: 0.5 });

    titleObserver.observe(selfSection);
  });

  // PIXEL — random highlight squares
  (function () {
    const pixelSection = document.querySelector("#pixel");
    const sparkLayer = document.querySelector(".pixel-spark-viewport");
    if (!pixelSection || !sparkLayer) return;

    const SPARK_POOL_SIZE = 20;
    const sparks = [];

    // create pool
    for (let i = 0; i < SPARK_POOL_SIZE; i++) {
      const s = document.createElement("div");
      s.className = "pixel-spark";
      sparkLayer.appendChild(s);
      sparks.push(s);
    }

    let active = false;

    function triggerSparks() {
      if (!active) return;

      // 3–5 sparks per cycle
      const count = 3 + Math.floor(Math.random() * 3);

      for (let i = 0; i < count; i++) {
        const s = sparks[Math.floor(Math.random() * sparks.length)];

        s.style.top = Math.random() * 100 + "%";
        s.style.left = Math.random() * 100 + "%";
        s.style.opacity = 0.22;

        setTimeout(() => {
          s.style.opacity = 0;
        }, 350 + Math.random() * 300);
      }

      const nextDelay = 450 + Math.random() * 2300;
      setTimeout(triggerSparks, nextDelay);
    }

    // visibility detector
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            active = true;
            sparkLayer.style.display = "block";
            triggerSparks();
          } else {
            active = false;
            sparkLayer.style.display = "none";
          }
        });
      },
      { threshold: 0.5 }
      );

    observer.observe(pixelSection);
  })();
</script>
</div>
</body>
</html>