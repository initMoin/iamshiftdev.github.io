/* ==========================================================================
   1. VARIABLES & CONFIGURATION
   ========================================================================== */
   :root {
    /* --- PALETTE --- */
    --forge-orange: #ff4e00;
    --white: #ffffff;
    --black: #000000;
    --gray-light: #c0c0c0;
    --ok-green: #4ade80;
    --red-brand: #B40000;

    /* --- SPACING & SCALING --- */
    --nav-safe-right: 4.2rem;
    --section-padding-x: 2rem;

    /* The "Safe Zone" where the header sits. */
    --headline-safe-top: calc(130px + env(safe-area-inset-top)); 

    --header-scale-factor: 1;

    --space-xs: 0.4rem;
    --space-sm: 0.75rem;
    --space-md: 1.25rem;
    --space-lg: 2rem;
    --space-xl: 3rem;

    /* --- LOGO & TITLE SIZING --- */
    --global-logo-min: 64px;
    --global-logo-max: 101px;
    --global-logo-size: clamp(var(--global-logo-min), 6vw, var(--global-logo-max));

    --site-title-font-min: 2.3rem;
    --site-title-font-max: 3.6rem;
    --site-title-font-size: clamp(var(--site-title-font-min), 3.2vw, var(--site-title-font-max));

    /* --- NAVIGATION CONFIG --- */
    --nav-dot-size-inactive: 10px;
    --nav-dot-size-active: 16px;
    --nav-dot-hover-scale: 1.25;
    --nav-dot-spacing: 4.2rem;
    --nav-hover-scale-factor: 1.25;
    --nav-safe-bottom: env(safe-area-inset-bottom);

    /* --- ANIMATION TIMING --- */
    --boot-word-duration: 0.9s;
    --boot-word-step: 0.69s;

    /* --- INIT SPECIFIC --- */
    --init-top-offset: clamp(4rem, 8vw, 9rem);
    --init-safe-right: calc(var(--nav-safe-right) + 1rem);
    --init-vspace-sm: 0.35rem;
    --init-vspace-md: 0.55rem;
    --init-vspace-lg: 0.85rem;
  }


/* ==========================================================================
   2. GLOBAL RESET & CANVAS
   ========================================================================== */
   *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    height: 100%;
    width: 100%;
    font-family: 'Inter Tight', sans-serif;
    background-color: var(--black);
    scroll-behavior: smooth;
    overflow-x: hidden;
  }

  body {
    min-height: 100vh;
    min-height: 100dvh;
    width: 100%;
    background-color: transparent; 
    color: var(--white);
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }


/* ==========================================================================
   3. WALLPAPER ENGINE
   ========================================================================== */
   #wallpaper {
    position: fixed;
    top: -10vh; bottom: -10vh; left: 0; right: 0;
    z-index: -1;
    background-color: var(--black);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: background-color 0.8s ease-in-out, opacity 0.6s ease, filter 0.6s ease, transform 0.6s ease;
    will-change: background-image, background-color, filter;
  }

/* Theme Definitions */
body.theme-init #wallpaper { background-color: var(--forge-orange); background-image: none; filter: none; transform: none; }
body.theme-code #wallpaper {
  background-color: #0A0A0A;
  background-image: linear-gradient(to right, rgba(255,255,255,0.042) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.042) 1px, transparent 1px);
  background-size: 33px 33px; filter: none; transform: none;
}
body.theme-pixel #wallpaper { background-color: #000; background-image: url("assets/pixel-bg.jpg"); transform: scale(1.15); filter: none; }

/* ECHO: Darker Overlay (0.75) */
body.theme-echo #wallpaper {
  background-color: #000;
  background-image: linear-gradient(rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0.75)), url("assets/echo-bg.jpg");
  filter: none; transform: scale(1);
}

body.theme-self #wallpaper { background-color: #ffffff; background-image: none; filter: none; transform: none; }
body.theme-ping #wallpaper {
  background-color: #050505;
  background-image: none !important;
  filter: none; transform: none;
}


/* ==========================================================================
   4. TYPOGRAPHY & SHARED UTILITIES
   ========================================================================== */
   .headline, .headline-code, .headline-pixel, .headline-echo, .headline-self, .headline-ping {
    font-size: 3rem;
    letter-spacing: -0.02em;
    line-height: 1.1;
    margin-top: 0 !important; 
    margin-bottom: 0.25rem;
  }

  .init-tagline, .code-tagline, .pixel-tagline, .echo-tagline, .self-tagline, .ping-tagline {
    font-family: 'Overpass Mono', monospace;
    font-size: 0.95rem;
    letter-spacing: 0.16em;
    text-transform: lowercase;
    color: rgba(255,255,255,0.78);
    margin-bottom: 1.25rem;
  }

  .pixel-intent, .echo-intent, .ping-intent {
    font-family: 'Inter Tight', sans-serif;
    font-size: 1.15rem;
    line-height: 1.6;
    color: rgba(255,255,255,0.9);
    max-width: 42rem;
    margin-bottom: 2rem;
  }

  .mono { font-family: 'Overpass Mono', monospace; }
  .dot { display: inline-block; position: relative; top: 0.05em; line-height: 1; margin: 0 0.2rem; transition: transform 0.2s ease; }
  .dot:hover { transform: scale(1.3); }


/* ==========================================================================
   5. UI COMPONENTS
   ========================================================================== */
/* Expandable Lines */
.code-block, .pixel-block, .echo-block, .self-block { display: flex; flex-direction: column; gap: var(--space-sm); }
.code-line, .pixel-line, .echo-line { cursor: pointer; display: flex; flex-direction: column; align-items: flex-start; border-color: rgba(255,255,255,0.14); }
.code-header, .pixel-header, .echo-header { display: flex; align-items: center; gap: 0.5rem; }
.code-main, .pixel-main, .echo-main { font-size: 1.13rem; line-height: 1.5; color: rgba(255, 255, 255, 0.95); letter-spacing: 0.015em; }
.expand-arrow { display: inline-flex; align-items: center; justify-content: center; width: 1.1rem; flex-shrink: 0; margin-right: 0.1rem; font-size: 1.42rem; transition: transform 0.3s ease; color: var(--forge-orange); }
.code-line.expanded .expand-arrow, .pixel-line.expanded .expand-arrow, .echo-line.expanded .expand-arrow { transform: rotate(90deg); }
.code-detail, .pixel-detail, .echo-detail { display: block; font-size: 1.15rem; color: rgba(255, 255, 255, 0.75); padding-left: 1.6rem; padding-top: 0.3rem; line-height: 1.6; max-height: 0; opacity: 0; transform: translateY(4px); overflow: hidden; transition: max-height 0.4s ease, opacity 0.4s ease, transform 0.4s ease; }
.code-line.expanded .code-detail, .pixel-line.expanded .pixel-detail, .echo-line.expanded .echo-detail { max-height: 300px; opacity: 1; transform: translateY(0); }

/* Social Icons & Tooltips */
.creative-principle, .pixel-social-links, .echo-social-links, .self-social { margin-top: 2.75rem; font-family: 'Overpass Mono', monospace; font-size: 1.05rem; opacity: 0.95; }
.social-icon { font-size: 1.6rem; color: rgba(255,255,255,0.6); text-decoration: none; display: inline-flex; align-items: center; justify-content: center; transition: color 0.3s ease, transform 0.2s ease; position: relative; }
.social-icon:hover { color: inherit; transform: translateY(-3px); }

/* Tooltip (Bottom - STRICT LEFT ALIGNMENT) */
.social-icon::after {
  content: attr(data-label);
  position: absolute;
  top: 100%; 
  left: 0; /* Anchor left edge to icon's left edge */
  transform: translateY(10px);
  background: #000; color: #fff;
  padding: 4px 8px; border-radius: 4px;
  font-family: 'Overpass Mono', monospace; font-size: 0.75rem;
  white-space: nowrap; opacity: 0; pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  z-index: 10;
}

/* Hover State */
.social-icon:hover::after { opacity: 1; transform: translateY(5px); }

/* Brand Colors */
a[href*="dribbble"]:hover { color: #ea4c89 !important; }
a[href*="behance"]:hover { color: #1769ff !important; }
a[href*="instagram"]:hover { color: #e1306c !important; }
a[href*="bsky"]:hover { color: #0285FF !important; }
a[href*="mastodon"]:hover { color: #6364FF !important; }
a[href*="substack"]:hover { color: #FF6719 !important; }
a[href*="github"]:hover { color: #000000 !important; }
a[href*="500px"]:hover { color: #000000 !important; }

.pixel-social-links, .echo-social-links, .ping-social-array { display: flex; flex-direction: row; align-items: center; gap: 1.5rem; margin-top: 2.5rem; flex-wrap: nowrap; }
.pixel-social-links .dot, .echo-social-links .dot, .ping-social-array .dot { display: none; }


/* ==========================================================================
   6. LAYOUT & SCROLL SNAPPING (WITH MASKING)
   ========================================================================== */
   .snap-container {
    height: 100dvh; min-height: 100dvh; width: 100%;
    overflow-y: scroll;
    scroll-snap-type: y mandatory;
    scroll-behavior: smooth;
    scrollbar-width: none; -ms-overflow-style: none; z-index: 2;

    /* Mask applied conditionally via .masked class */
    mask-image: none;
    -webkit-mask-image: none;
  }

/* THE CONTENT MASK (Applied after boot) */
.snap-container.masked {
  mask-image: linear-gradient(to bottom, transparent 0px, transparent 105px, black 140px, black 100%);
  -webkit-mask-image: linear-gradient(to bottom, transparent 0px, transparent 105px, black 140px, black 100%);
}

.snap-container::-webkit-scrollbar { width: 0 !important; height: 0 !important; }
.snap-container.boot-lock { overflow: hidden !important; }

.snap-section {
  height: 100vh; min-height: 100dvh; width: 100%;
  scroll-snap-align: start; scroll-snap-stop: always;
  position: relative;
  
  display: flex; 
  flex-direction: column;
  justify-content: flex-start; 
  align-items: center;         
  
  /* Padding top pushes content down initially */
  padding-top: var(--headline-safe-top); 
  padding-left: var(--section-padding-x);
  padding-right: var(--nav-safe-right);
  
  overflow: hidden;
  background-size: cover; background-position: center;
}

/* Center Content Wrappers */
.code-container, .pixel-container, .echo-container, .self-container, .ping-container, .landing-content {
  position: relative; z-index: 3; max-width: 800px; width: 100%; margin: 0 auto;
}


/* ==========================================================================
   7. BOOT SEQUENCE
   ========================================================================== */
   #bootWrapper {
    position: absolute; top: 0; left: 0; width: 100%; height: 100vh;
    overflow-y: auto; display: block; z-index: 10001; /* Fix: Above global header */
    background: var(--black); color: var(--gray-light);
    padding: 2rem; text-align: left; font-family: 'Overpass Mono', monospace;
  }
  #bootText p { opacity: 0; max-height: 0; overflow: hidden; transition: opacity 0.25s ease, max-height 0.25s ease; }
  #bootText p.visible { opacity: 1; max-height: 200px; }

/* BOOT HEADER */
#bootText .boot-header-line {
  display: flex; align-items: center; gap: 0.75rem; 
  font-size: 1.5rem; padding-bottom: 0.95rem;
  color: var(--white);
  font-family: 'Overpass Mono', monospace;
  font-weight: 600;
}
#bootText .boot-header-logo { height: 2em; width: auto; display: block; object-fit: contain; }

.status-ok { color: var(--ok-green); }
.loading-ellipsis { display: inline-block; min-width: 1.5ch; }
.boot-spacer { height: 13vh; width: 100%; }

/* Splash */
.boot-splash {
  position: absolute; inset: 0; display: flex; flex-direction: column;
  align-items: center; justify-content: center; background: var(--black);
  opacity: 0; pointer-events: none;
}
.boot-splash.show { opacity: 1; pointer-events: auto; transition: opacity 0.8s ease-out; }
.boot-splash-inner { text-align: center; }
.boot-logo { width: 140px; height: auto; margin-bottom: 1.5rem; object-fit: contain; }

/* Boot Title */
.boot-title {
  display: flex; 
  flex-direction: row-reverse; 
  gap: 0.69rem;
  justify-content: center; 
  align-items: baseline; 
  font-size: clamp(2.8rem, 5vw, 4.2rem); 
  line-height: 1; 
  color: var(--white);
}
.bt-word { opacity: 0; transform: translateY(6px); }
.bt-word.animate { animation: btFadeUp 0.5s ease forwards; }
.bt-let.animate { animation: btLetLift 0.45s ease-out forwards 0.8s; }
.bt-shift.animate { animation: btFadeLeft 0.45s ease-out forwards 0.3s; }
.bt-colon.animate { animation: btFadeLeft 0.45s ease-out forwards 0.6s; }
.bt-moin.animate { animation: btFadeLeft 0.45s ease-out forwards 0s; }
.boot-progress-bar {
  width: 100%; height: 13px; background: rgba(255,255,255,0.15);
  border-radius: 3px; overflow: hidden; margin-top: 1.5rem;
}
.boot-progress-fill {
  height: 100%; width: 0%; background: #ff4e00;
  border-radius: 3px; transform-origin: left; transition: width 4.2s ease-out;
}
.boot-progress-fill.completed { background: #ffffff; }

.bt-let, .bt-shift, .bt-colon { font-family: "Helvetica Now Display", sans-serif; font-weight: 800; letter-spacing: -0.042em; }
.bt-moin { 
  font-family: 'Oxanium', sans-serif !important; 
  font-weight: 700 !important; 
  text-transform: none; 
  position: relative;
  transform: translateY(2px); 
}

@keyframes btLetLift { 0% { opacity: 0; transform: translateY(3px); } 100% { opacity: 0.33; transform: translateY(0); } }
@keyframes btFadeLeft { 0% { opacity: 0; transform: translateX(-6px); } 100% { opacity: 1; transform: translateX(0); } }


/* ==========================================================================
   8. SECTION: INIT
   ========================================================================== */
   #init { padding: 0; }
   .init-center { height: 100%; width: 100%; display: flex; justify-content: center; align-items: flex-start; padding-top: var(--headline-safe-top); }
   .init-content {
    width: 100%; max-width: calc(800px + 2 * var(--section-padding-x));
    margin: 0 auto; padding-left: var(--section-padding-x); padding-right: var(--init-safe-right);
    padding-bottom: 3rem; text-align: left;
  }
  #init .headline { color: var(--black); text-align: left; margin-top: 0; }
  .intro-line {
    font-family: 'Inter Tight', sans-serif; font-weight: 400; font-size: 1.25rem;
    line-height: 1.55; 
    margin: 0 auto 1.4rem 0; 
    max-width: 700px; text-align: left;
    color: var(--white);
  }

/* Axiom / Cogito Toggle */
.axiom {
  font-size: 1.15rem; font-weight: 500; letter-spacing: -0.015em;
  margin-top: 2.2rem; color: var(--white);
  min-height: 1.6em;
}
.cogito-text {
  display: inline-block; opacity: 1; transition: opacity 0.5s ease;
}
.cogito-text.fade-out { opacity: 0; }

.shift { font-family: 'Overpass Mono', monospace; font-weight: 500; color: var(--black); letter-spacing: -0.03em; }
.moin { font-family: 'Oxanium', sans-serif; font-weight: 400; color: var(--black); }
.indent { display: inline-block; }
.section-init { color: var(--black); }


/* ==========================================================================
   9. SECTION: CODE
   ========================================================================== */
   .section-code { color: var(--white); position: relative; }
   .headline-code { color: var(--forge-orange); }

/* Apps Block - Border removed */
.code-apps-block { margin-top: 1.25rem; padding-top: 2rem; border-top: none; }
.code-apps-label { font-size: 0.8rem; opacity: 0.5; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.05em; }
.code-apps-grid { display: flex; flex-wrap: wrap; gap: 1.5rem; }
.app-link {
  color: var(--forge-orange); text-decoration: none; font-size: 0.95rem;
  border: 1px solid rgba(255, 78, 0, 0.3); padding: 0.5rem 1rem; border-radius: 4px;
  transition: all 0.2s ease;
}
.app-link:hover { background: rgba(255, 78, 0, 0.1); border-color: var(--forge-orange); }

/* Profile Link */
.code-profile-wrapper { margin-top: 1.5rem; }
.profile-text-link {
  font-size: 0.85rem; color: rgba(255, 255, 255, 0.6); text-decoration: none;
  border-bottom: 1px solid transparent; transition: all 0.2s ease;
}
.profile-text-link:hover { color: var(--forge-orange); border-bottom-color: var(--forge-orange); }
.profile-text-link .arrow { display: inline-block; transition: transform 0.2s ease; margin-left: 4px; }
.profile-text-link:hover .arrow { transform: translateX(3px); }

.creative-principle { margin-top: 2rem; margin-bottom: 0.5rem; }
.creative-principle .dot { color: var(--forge-orange); }
.code-prompt { margin-top: 1.3rem; }
.code-cursor {
  display: inline-block; width: 1ch; height: 1.3em; margin-left: 0.25ch;
  background: currentColor; animation: cursorFadeIn 0.3s ease-out 0.7s forwards, cursorBlink 0.7s steps(1, end) 1.0s infinite;
}
@keyframes cursorFadeIn { from { opacity: 0; } to { opacity: 0.69; } }
@keyframes cursorBlink { 0%, 50% { opacity: 0.69; } 50.01%, 100% { opacity: 0; } }
.cursor-placeholder { opacity: 0; position: relative; top: -0.3em; animation: placeholderFade 0.33s ease-out 0.55s forwards; }
@keyframes placeholderFade { from { opacity: 0; } to { opacity: 0.42; } }


/* ==========================================================================
   10. SECTION: PIXEL & ECHO
   ========================================================================== */
   .section-pixel { color: var(--white); position: relative; }
   .headline-pixel { color: var(--forge-orange); }
   .pixel-social-links .dot { color: var(--forge-orange); }

   .pixel-spark-layer { position: absolute; inset: 0; pointer-events: none; }
   .pixel-spark {
    position: absolute; width: 6px; height: 6px; background: currentColor;
    opacity: 0; transform: translate(-50%, -50%); transition: opacity 0.25s ease-out;
  }
  .pixel-spark.on { opacity: 0.22; }
  .pixel-spark-viewport { position: fixed; inset: 0; z-index: 2; pointer-events: none; display: none; }

  .section-echo { color: var(--white); }
  .headline-echo { color: var(--forge-orange); }
  .echo-social-links .dot { color: var(--forge-orange); }


/* ==========================================================================
   11. SECTION: SELF (DESKTOP GRID)
   ========================================================================== */
   #self { display: flex; }
   .section-self { color: #000000; }
   .self-container { width: 100%; max-width: 1000px; margin: 0 auto; }
   .headline-self { color: var(--red-brand); text-transform: lowercase; }
   .self-tagline { color: #444444; margin-bottom: 2rem; }

   .section-self .self-header {
    text-align: left; width: 100%; margin-left: 0;
    margin-bottom: 2.5rem; position: relative; z-index: 1;
  }

/* DESKTOP LAYOUT */
.self-content {
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: 3rem;
  align-items: start;
}

.self-left-col { display: flex; flex-direction: column; align-items: flex-start; }
.section-self .self-photo { 
  width: 100%; height: auto; aspect-ratio: 1/1; 
  border-radius: 6px; overflow: hidden; margin-bottom: 1rem;
}
.section-self .self-photo img { width: 100%; height: 100%; object-fit: cover; display: block; }
.self-minor-blurb { font-size: 0.8rem; color: #666; line-height: 1.4; opacity: 0.8; }

.self-right-col { display: flex; flex-direction: column; }
.self-intro { font-size: 1.25rem; line-height: 1.5; font-weight: 500; color: #000; margin-bottom: 2rem; }
.self-block-title { margin-top: 0.5rem; margin-bottom: 0.5rem; font-size: 1.1rem; letter-spacing: -0.015em; text-transform: lowercase; color: var(--red-brand); font-weight: 600; }
.self-body { font-size: 1.05rem; line-height: 1.6; color: #000; margin-bottom: 2rem; }

.self-footer { grid-column: 1 / -1; margin-top: 1rem; }
.self-contact { font-size: 1.1rem; color: var(--red-brand); letter-spacing: 0.04em; margin-bottom: 0.5rem; }

/* CTA Link Animation */
.self-cta-link { font-size: 1rem; color: #000; text-decoration: none; border-bottom: 1px solid rgba(0,0,0,0.2); transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 0.3rem;}
.self-cta-link .arrow { display: inline-block; transition: transform 0.3s ease; }
.self-cta-link:hover { border-bottom-color: var(--red-brand); color: var(--red-brand); }
.self-cta-link:hover .arrow { transform: translateX(5px) rotate(90deg); } 

/* ==========================================================================
   12. SECTION: PING
   ========================================================================== */
   .section-ping { color: var(--white); position: relative; }
   .ping-container { max-width: 800px; width: 100%; position: relative; z-index: 2; }
   .headline-ping { color: var(--forge-orange); }
   .ping-intent { margin-bottom: 3.5rem; color: rgba(255,255,255,0.85); }

   .ping-grid { display: grid; grid-template-columns: max-content max-content 1fr; gap: 3rem; margin-bottom: 4rem; align-items: start; }
   .ping-item { display: flex; flex-direction: column; align-items: flex-start; }
   .ping-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--forge-orange); margin-bottom: 0.8rem; opacity: 0.9; }
   .ping-link {
    font-size: 1.4rem; color: var(--white); text-decoration: none;
    border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 4px;
    transition: all 0.2s ease; white-space: nowrap; display: inline-block;
  }
  .ping-link:hover { border-bottom-color: var(--forge-orange); color: var(--forge-orange); }
  .ping-link .arrow { display: inline-block; transform: rotate(-45deg); transition: transform 0.2s ease; margin-left: 6px; }
  .ping-link:hover .arrow { transform: rotate(0deg); }

  .ping-stat { font-size: 1.4rem; color: rgba(255,255,255,0.95); }
  .ping-stat .dim { color: rgba(255,255,255,0.4); font-size: 0.8em; }
  .ping-sub { font-family: 'Inter Tight', sans-serif; font-size: 0.9rem; color: rgba(255,255,255,0.5); margin-top: 0.6rem; }

  .ping-bg-wrapper {
    position: fixed; inset: 0; width: 100vw; height: 100vh;
    overflow: hidden; pointer-events: none; z-index: 0;
    opacity: 0; transition: opacity 0.5s ease;
  }
  body.theme-ping .ping-bg-wrapper { opacity: 1; }

/* FIX: Align Rings relative to CONTAINER */
.section-ping { position: relative; } 
.ping-rings { 
  position: absolute; 
  top: 18vh;  
  left: 2rem; 
  width: 0; height: 0; 
}
.ping-ring {
  position: absolute; width: 848px; height: 848px; border-radius: 50%; border: 1px solid currentColor;
  opacity: 0; transform: translate(-50%, -50%) scale(0.2); animation: pingExpand 6.5s ease-out infinite;
}
.ping-ring:nth-child(2) { animation-delay: 1.2s; }
.ping-ring:nth-child(3) { animation-delay: 2.4s; }
.ping-ring:nth-child(4) { animation-delay: 3.6s; }
@keyframes pingExpand {
  0% { opacity: 0.3; transform: translate(-50%, -50%) scale(0.2); }
  60% { opacity: 0.1; }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(9.0); }
}


/* ==========================================================================
   13. NAV SPINE & GLOBAL LOGO
   ========================================================================== */
   .side-nav {
    position: fixed; right: 2.25rem; top: 50%; transform: translateY(-50%);
    opacity: 0; transition: opacity 1s ease; z-index: 9999;
    display: flex; flex-direction: column; align-items: center;
    gap: var(--nav-dot-spacing);
  }
  .side-nav.show { opacity: 1; }
  .side-nav ul {
    list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; align-items: center;
    gap: var(--nav-dot-spacing);
  }
  .side-nav li {
    width: var(--nav-dot-size-inactive); height: var(--nav-dot-size-inactive);
    background: rgba(255,255,255,0.22); border-radius: 50%; cursor: pointer;
    position: relative; opacity: 0.55; transition: all 0.25s ease;
  }
  .side-nav li:hover:not(.active) { transform: scale(var(--nav-hover-scale-factor)); opacity: 0.9; }
  .side-nav li.active {
    width: var(--nav-dot-size-active); height: var(--nav-dot-size-active);
    opacity: 1; transform: none; background: var(--nav-color);
  }

/* Tooltips for Nav Dots */
.side-nav li::after {
  content: attr(data-tooltip);
  position: absolute; right: 180%; top: 50%; transform: translateY(-50%);
  background: #000; color: #fff; padding: 4px 8px; border-radius: 4px;
  font-family: 'Overpass Mono', monospace; font-size: 0.75rem;
  white-space: nowrap; opacity: 0; pointer-events: none; transition: opacity 0.2s;
}
.side-nav li:hover::after { opacity: 1; }

/* Nav Arrows */
.nav-arrow {
  display: flex; align-items: center; justify-content: center;
  width: 44px; height: 44px;
  background-color: rgba(255, 255, 255, 0.15); color: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(4px); border-radius: 50%; font-size: 1.4rem; cursor: pointer;
  transition: all 0.2s ease;
  cursor: pointer; /* User request */
}
.nav-arrow:hover, .nav-arrow.active-state {
  background-color: var(--forge-orange); color: var(--white);
  transform: scale(1.15); box-shadow: 0 4px 12px rgba(255, 78, 0, 0.3); opacity: 1;
}
.nav-arrow:active { transform: scale(0.95); box-shadow: 0 2px 6px rgba(255, 78, 0, 0.3); }
.nav-arrow.disabled { opacity: 0; pointer-events: none; cursor: default; }

/* THEME OVERRIDES FOR NAV DOTS */
body.theme-init .side-nav li.active { background-color: #ffffff !important; opacity: 1; }
body.theme-init .side-nav li { background-color: rgba(255, 255, 255, 0.4); }

/* INIT ARROW OVERRIDE (Fix) */
/* Default: Transparent/Glass BG, White Icon */
body.theme-init .nav-arrow { background-color: rgba(255, 255, 255, 0.15) !important; color: #ffffff !important; }
/* Hover: White BG, Orange Icon */
body.theme-init .nav-arrow:hover, body.theme-init .nav-arrow.active-state { background-color: #ffffff !important; color: var(--forge-orange) !important; }

body.theme-code .side-nav li.active,
body.theme-pixel .side-nav li.active,
body.theme-echo .side-nav li.active,
body.theme-ping .side-nav li.active {
  background-color: var(--forge-orange) !important;
  opacity: 1;
}
body.theme-code .side-nav li,
body.theme-pixel .side-nav li,
body.theme-echo .side-nav li,
body.theme-ping .side-nav li {
  background-color: rgba(255, 255, 255, 0.25);
}

body.theme-self .side-nav li { background: rgba(0,0,0,0.22); }
body.theme-self .side-nav li.active { background: var(--forge-orange); }
body.theme-self .nav-arrow { background-color: rgba(0, 0, 0, 0.1); color: rgba(0, 0, 0, 0.4); }
body.theme-self .nav-arrow:hover, body.theme-self .nav-arrow.active-state { background-color: var(--forge-orange); color: var(--white); }

/* Global Header (Badge + Title) */
.global-logo-container {
  position: fixed; top: 2rem; left: 2rem; width: var(--global-logo-size); height: var(--global-logo-size);
  background: rgba(255, 255, 255, 0.85); border-radius: 50%; display: flex; justify-content: center; align-items: center;
  z-index: 9999; 
  opacity: 0; /* Hidden during boot */
  transform: rotate(-1440deg); visibility: hidden;
  cursor: pointer; /* Final stamp */
}
.global-logo-img { width: 100%; height: auto; display: block; }
.global-logo-container.show { opacity: 1; visibility: visible; transform: none; transition: opacity 0.4s ease-out; }
.global-logo-container.show .spin-target { visibility: visible; animation: spinReverb 1.2s ease-out both; animation-delay: 0.3s; }

.site-title-wrap {
  position: fixed; top: calc(2rem + (var(--global-logo-size) / 2)); left: calc(2rem + var(--global-logo-size) + 1.5rem);
  transform: translateY(-50%); z-index: 9998; pointer-events: none;
}
/* Title hidden initially to avoid bleed */
.site-title { 
  display: flex; gap: 0.5rem; align-items: baseline; font-size: var(--site-title-font-size); line-height: 1; 
  color: #ffffff; transition: color 0.35s ease;
  opacity: 0; 
  transition: opacity 0.5s ease-out;
}
.site-title.show { opacity: 1; }
.site-title.dark { color: #000000; }
.global-header { position: fixed; top: 0; right: 0; z-index: 9999; display: flex; align-items: center; gap: 0.75rem; transform-origin: top right; }

/* Header Fonts */
.g-word-let, .g-word-shift, .g-word-colon { font-family: "Helvetica Now Display", sans-serif; font-weight: 800; letter-spacing: -0.042em; }
.g-word-moin { 
  font-family: 'Oxanium', sans-serif !important; 
  font-weight: 700 !important; 
  text-transform: none; 
  position: relative; top: 0;
  transform: translateY(2px); 
}

.global-logo-container.show .g-word-let { animation: gLetFadeLift 0.45s ease-out forwards; }
.global-logo-container.show .g-word-shift { animation: gFadeLeft 0.45s ease-out forwards 0.25s; }
.global-logo-container.show .g-word-colon { animation: gFadeLeft 0.45s ease-out forwards 0.50s; }
.global-logo-container.show .g-word-moin { animation: gFadeLeft 0.45s ease-out forwards 0.75s; }
.global-logo-container.show .site-title { opacity: 1 !important; transform: translateY(-50%) translateX(0) !important; }

@keyframes gLetFadeLift { from { opacity: 0; transform: translateY(3px); } to { opacity: 0.23; transform: translateY(0); } }
@keyframes gFadeLeft { from { opacity: 0; transform: translateX(-6px); } to { opacity: 1; transform: translateX(0); } }

/* 1. The Initial "Reverb" Spin (Triggered on boot finish) */
@keyframes spinReverb {
  0% { transform: rotate(-360deg) scale(0.8); opacity: 0; }
  60% { transform: rotate(15deg) scale(1.05); opacity: 1; }
  85% { transform: rotate(-5deg) scale(0.98); }
  100% { transform: rotate(0deg) scale(1); opacity: 1; }
}

/* 2. Scroll Spin Classes (Triggered by JS) */
.spin-scroll-cw {
  animation: spinCW 0.5s ease-out forwards; /* Clockwise */
}

.spin-scroll-ccw {
  animation: spinCCW 0.5s ease-out forwards; /* Counter-Clockwise */
}

/* 3. The Rotation Keyframes */
@keyframes spinCW {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes spinCCW {
  from { transform: rotate(0deg); }
  to { transform: rotate(-360deg); }
}


/* ==========================================================================
   14. MEDIA QUERIES (MOBILE)
   ========================================================================== */

/* 700px â€” MAIN MOBILE BREAKPOINT */
@media (max-width: 700px) {
  :root { 
    --nav-safe-right: 2.4rem; 
    --section-padding-x: 1.25rem; 
    /* Reduced headline safe top for mobile to buy vertical space */
    --headline-safe-top: 70px; 
    --header-scale-factor: 0.58; 
    --init-top-offset: clamp(2.4rem, 11vw, 5rem); 
  }

  .snap-section {
    display: flex !important; flex-direction: column !important;
    justify-content: flex-start !important;
    padding-top: calc(140px + env(safe-area-inset-top)) !important; 
    height: auto !important; min-height: 100vh; overflow: visible !important;
    padding-bottom: 6rem; padding-right: 4rem !important; 
  }
  .code-container, .pixel-container, .echo-container, .self-container, .ping-container {
    display: flex !important; flex-direction: column !important; width: 100%; height: auto;
  }
  
  #init { justify-content: flex-start !important; padding-top: calc(100px + env(safe-area-inset-top)) !important; padding-right: 2.5rem !important; }
  #init .init-content { margin-top: calc(var(--headline-safe-top) + 0.4rem); padding-left: 1.05rem; padding-right: 1.05rem; }
  #init .headline { font-size: 3.1rem; text-align: left; line-height: 1.05; }
  #init .intro-line { font-size: 1.17rem; }
  #init .init-tagline { white-space: nowrap; font-size: clamp(0.85rem, 2.5vw, 1.2rem) !important; overflow: hidden; }
  #init .axiom { white-space: nowrap; font-size: clamp(0.85rem, 2.5vw, 1.2rem) !important; overflow: hidden; }

  .headline-pixel, .headline-echo, .headline-self, .headline-ping, .headline-code { margin-top: 0 !important; }
  .section-code .creative-principle { margin-top: 3rem; margin-bottom: 0.5rem; }
  .section-code .code-prompt { margin-top: 0.5rem; }

  /* --- SELF SECTION MOBILE OVERRIDES (Vertical Stack) --- */
  /* FIX: Ensure container can flex and not be cut off */
  .section-self .self-container {
    display: flex; 
    flex-direction: column;
    height: 100%; /* Fill the section */
    overflow-y: hidden;
  }
  
  .section-self .self-content {
    display: flex; 
    flex-direction: column; /* Force Stack */
    grid-template-columns: none; 
    gap: 0;
    flex: 1; /* Allow content to grow/shrink */
    overflow-y: hidden; /* REMOVED INTERNAL SCROLL as requested */
    padding-bottom: 0; 
  }
  
  /* Reset Desktop Grid */
  .self-left-col, .self-right-col { display: contents; } 
  .self-footer { grid-column: auto; margin-top: 0; flex-shrink: 0; }

  /* Remove Gaps */
  .section-self .self-header { margin-top: 0 !important; margin-bottom: 0rem !important; }
  .self-tagline { margin-bottom: 1rem !important; }
  
  /* FIX: Mobile Profile Photo Spacing (User Supplied) */
  .self-photo { 
    /* FIX: Force small size to prevent overflow */
    width: 100px !important; height: 100px !important; min-width: 100px !important; /* FIXED SIZE */
    margin: 0rem auto 1rem auto; /* Tight spacing above/below */
    flex-shrink: 0; /* Important: Do not crush photo */
    border-radius: 50%; overflow: hidden;
    background: rgba(0,0,0,0.1);
  }
  .self-photo img { width: 100%; height: 100%; object-fit: cover; }
  
  .self-minor-blurb { display: none; } 

  /* Unified Typography: Mirroring ECHO (User Request) */
  /* Intro text mirrors Echo main content */
  .self-intro { 
    text-align: left; 
    font-size: clamp(0.9rem, 2vh, 1.1rem) !important;
    line-height: 1.35; margin-bottom: 1vh;
  }
  
  /* All content bodies mirror Echo detail/main */
  .code-main, .pixel-main, .echo-main {
    font-size: clamp(0.9rem, 2vh, 1.1rem) !important; 
    line-height: 1.4;
  }
  .code-detail, .pixel-detail, .echo-detail, .self-body {
    font-size: clamp(0.8rem, 1.8vh, 1rem) !important; 
    line-height: 1.5; opacity: 0.9;
    margin-bottom: 0;
  }
  
  /* Intent blocks mirror echo intent */
  .pixel-intent, .code-tagline {
    font-size: clamp(0.85rem, 2vh, 1.1rem) !important; 
    margin-bottom: 2vh !important;
  }

  .self-block-title { 
    margin-top: 1.5vh; font-size: clamp(0.75rem, 2vh, 0.9rem); 
    opacity: 0.6; margin-bottom: 0.5vh;
  }
  .self-contact { 
    margin-top: 3vh !important; margin-bottom: 0 !important; 
    font-size: clamp(0.85rem, 2.2vh, 1rem); line-height: 1.3;
  }
  
  /* Use specific padding to prevent Nav Dot overlap */
  .section-self { 
    padding-right: 2.5rem !important; 
    
    /* UNLOCK SCROLL for Self Section */
    height: auto !important; 
    min-height: 100vh;
    overflow: visible !important; /* Allow scroll to see footer */
    padding-bottom: 2rem !important;
  }

  /* --- PING: MOBILE STACKING --- */
  #ping .ping-grid {
    display: flex; flex-direction: column; /* Force vertical */
    margin-top: 1vh !important; margin-bottom: 2vh !important; gap: 2vh !important; 
  }
  
  /* --- DYNAMIC SCALING --- */
  .echo-intent, .ping-intent { font-size: clamp(0.85rem, 2vh, 1.1rem) !important; margin-bottom: 2vh !important; }
  .echo-block { gap: 1vh !important; }
  .ping-stat, .ping-link { font-size: clamp(1.1rem, 2.5vh, 1.4rem) !important; }

  /* --- FORCE "NO SCROLL" BOTTOM BUFFER (4rem) --- */
  .section-echo, .section-ping {
    padding-bottom: 4rem !important; /* Reduced from 13vh */
    height: 100vh !important; overflow: hidden !important;
  }
  
  .self-container, .echo-container, .ping-container {
    height: 100%; display: flex; flex-direction: column; justify-content: flex-start; padding-bottom: 0 !important;
  }

  /* MOBILE NAV ARROWS */
  .side-nav { right: 1rem; }
  .nav-arrow {
    width: 30px; height: 30px; font-size: 1.2rem;
    background-color: transparent; backdrop-filter: none; color: var(--white); box-shadow: none; border: 1px solid transparent;
  }
  .nav-arrow:active, .nav-arrow:hover, .nav-arrow.active-state {
    background-color: var(--forge-orange); color: var(--white); transform: scale(1.05); box-shadow: 0 2px 8px rgba(255, 78, 0, 0.4);
  }
  body.theme-self .nav-arrow { color: rgba(0,0,0,0.4); }
  body.theme-self .nav-arrow:active, body.theme-self .nav-arrow:hover, body.theme-self .nav-arrow.active-state { 
    background-color: var(--forge-orange); color: var(--white); 
  }
}